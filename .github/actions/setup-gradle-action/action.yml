name: "Set up Gradle Action"
inputs:
  cache-read-only:
    required: true
    description: Cache read-only state

  gradle-encryption-key:
    required: true
    description: Gradle Cache encryption key

runs:
  using: "composite"
  steps:
    # Validates the checksums of all Gradle Wrapper JAR files present in the repo
    # and fails if any unknown Gradle Wrapper JAR files are found.
    - name: Validate Gradle Wrapper
      uses: gradle/actions/wrapper-validation@v4

    - name: Set up Gradle
      uses: gradle/actions/setup-gradle@v4
      with:
        # Cache data needs to be encrypted to be safely stored in the GitHub Actions cache
        cache-encryption-key: ${{ inputs.gradle-encryption-key }}

        # Builds on other branches will only read existing entries from the cache.
        cache-read-only: ${{ inputs.cache-read-only }}